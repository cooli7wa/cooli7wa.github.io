I"¥*<p>bitcoin-cli æˆ–è€… bitcoin core wallet çš„ consoleï¼Œæ”¯æŒå¾ˆå¤šå‘½ä»¤ï¼Œå¯ä»¥è·å¾—åŒºå—é“¾ç›¸å…³çš„å¾ˆå¤šä¿¡æ¯ï¼Œä¸€æ­¥æ­¥å®éªŒå’Œè§£æä¸‹å‘½ä»¤çš„è¾“å‡ºã€‚</p>

<p><a href="https://en.bitcoin.it/wiki/Original_Bitcoin_client/API_calls_list">å®Œæ•´çš„å‘½ä»¤åˆ—è¡¨</a></p>

<h3 id="getwalletinfo">getwalletinfo</h3>

<p>è·å–é’±åŒ…ç›¸å…³çš„ä¸€äº›ä¿¡æ¯ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td> --><td class="rouge-code"><pre>{
  "walletname": "wallet.dat",
  "walletversion": 159900,
  "balance": 0.00000000,
  "unconfirmed_balance": 0.00000000,
  "immature_balance": 0.00000000,
  "txcount": 0,
  "keypoololdest": 1532923740,
  "keypoolsize": 1000,
  "keypoolsize_hd_internal": 1000,
  "paytxfee": 0.00000000,
  "hdmasterkeyid": "a50eea8496c072b54f4f0b2937e3edb7bbc4761d"
}
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>balance: å·²ç¡®è®¤çš„ä½™é¢ï¼ŒåŒ…æ‹¬æŒ–çŸ¿æˆ–è€…æ™®é€šäº¤æ˜“</li>
  <li>unconfirmed_balance: æœªç¡®è®¤çš„ä½™é¢ï¼Œ<strong>ç¡®è®¤æ•°ä¸º0</strong>ï¼Œæ™®é€šäº¤æ˜“</li>
  <li>immature_balance: æœªæˆç†Ÿçš„ä½™é¢ï¼Œ<strong>ç¡®è®¤æ•°å°äº100</strong>ï¼Œåªé’ˆå¯¹æŒ–çŸ¿</li>
  <li>txcount: é’±åŒ…å†…çš„ transaction æ•°é‡</li>
  <li>keypoololdest: æœ€å…ˆç”Ÿæˆçš„ key çš„æ—¶é—´æˆ³</li>
  <li>keypoolsize: é¢„ç”Ÿæˆçš„ key æ•°é‡ï¼Œå¤–éƒ¨çš„ key</li>
  <li>keypoolsize_hd_internal: é¢„ç”Ÿæˆçš„ key æ•°é‡ï¼Œå†…éƒ¨çš„ keyï¼Œä¸º hd ä½¿ç”¨</li>
  <li>paytxfee: é¢„è®¾çš„æ”¯ä»˜è´¹ç”¨</li>
  <li>hdmasterkeyid: masterkey çš„ Hash160</li>
</ul>

<h3 id="getblockchaininfo">getblockchaininfo</h3>

<p>è·å¾—åŒºå—é“¾çš„ä¿¡æ¯</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
</pre></td> --><td class="rouge-code"><pre>{
  "chain": "main",
  "blocks": 539741,
  "headers": 539741,
  "bestblockhash": "0000000000000000000137324acb33a45f61d442cd767420ea934816ac20622c",
  "difficulty": 6727225469722.534,
  "mediantime": 1535947766,
  "verificationprogress": 0.9999988951741678,
  "initialblockdownload": false,
  "chainwork": "000000000000000000000000000000000000000003028651fd95478395288650",
  "size_on_disk": 207037656735,
  "pruned": false,
  "softforks": [
    {
      "id": "bip34",
      "version": 2,
      "reject": {
        "status": true
      }
    },
    {
      "id": "bip66",
      "version": 3,
      "reject": {
        "status": true
      }
    },
    {
      "id": "bip65",
      "version": 4,
      "reject": {
        "status": true
      }
    }
  ],
  "bip9_softforks": {
    "csv": {
      "status": "active",
      "startTime": 1462060800,
      "timeout": 1493596800,
      "since": 419328
    },
    "segwit": {
      "status": "active",
      "startTime": 1479168000,
      "timeout": 1510704000,
      "since": 481824
    }
  },
  "warnings": ""
}
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>
    <p>blocks &amp; headers: å½“å‰çš„åŒºå—é“¾é«˜åº¦</p>
  </li>
  <li>
    <p>bestblockhash: å½“å‰çš„æœ€ä¼˜å—ï¼ˆè¢«ç¡®è®¤æœ€å¤šçš„å—ï¼‰çš„ hash</p>
  </li>
  <li>
    <p>difficulty: å½“å‰éš¾åº¦å€¼</p>
  </li>
  <li>
    <p>mediantime: æœ€åå—ä¹‹å‰çš„ 11 ä¸ªå—çš„ä¸­é—´æ—¶é—´ï¼Œåç»­æœ‰æ•ˆå—çš„æ—¶é—´ä¸èƒ½æ—©äºè¿™ä¸ªä¸­é—´æ—¶é—´</p>
  </li>
  <li>
    <p>verificationprogress: éªŒè¯çš„è¿›ç¨‹ï¼Œä» 0 åˆ° 1</p>
  </li>
  <li>
    <p>chainwork: æŒ‰ç…§ç°åœ¨çš„éš¾åº¦ï¼Œé‡æ–°ç”Ÿæˆç›®å‰è¿™ä¹ˆå¤šåŒºå—ï¼Œä¸€å…±æœ‰å¤šå°‘å·¥ä½œé‡ã€‚å…¬å¼æ˜¯</p>

\[åŒºå—æ•° * éš¾åº¦ * [0x01,0001,0001]\]

    <p>æ¥è‡ª <a href="https://bitcoin.stackexchange.com/questions/26869/what-is-chainwork">What is chainwork?</a></p>
  </li>
  <li>
    <p>size_on_disk: æ‰€æœ‰åŒºå—æ‰€éœ€çš„å­˜å‚¨ç©ºé—´</p>
  </li>
  <li>
    <p>pruned: æ˜¯å¦åˆ å‡åŒºå—</p>
  </li>
  <li>
    <p>softforks: è½¯åˆ†å‰æ˜¯ä¸ºäº†å‡çº§åŒºå—é“¾è§„åˆ™æˆ–ä¿®å¤ BUGï¼Œä¸ä¼šå‡ºç°æ–°çš„å¸ç§
å‰é¢ 3 ä¸ªï¼ŒBIP34ã€66ã€65ï¼Œæ˜¯è€ç‰ˆæœ¬çš„è½¯åˆ†å‰ï¼Œæ¯æ¬¡å‡çº§ version é€’å¢ã€‚</p>

    <p>åé¢ 2 ä¸ªï¼Œcsvã€segwitï¼Œé‡‡ç”¨äº† BIP9 å®šä¹‰çš„æ–°çš„è½¯åˆ†å‰è§„åˆ™ï¼Œä¸å†ä½¿ç”¨ version é€’å¢çš„æ–¹å¼ï¼Œè€Œæ˜¯å¼•å…¥äº†â€œç‰ˆæœ¬ä½â€ã€â€œå¼€å§‹æ—¶é—´â€ã€â€œè¶…æ—¶â€ã€â€œçŠ¶æ€â€ç­‰æ¦‚å¿µã€‚active å°±ä»£è¡¨å·²ç»æˆåŠŸæ¿€æ´»ã€‚æ¥è‡ª <a href="https://github.com/bitcoin/bips/blob/master/bip-0009.mediawiki">BIP9</a></p>

    <p><strong>éƒ½æ˜¯å»ä¸­å¿ƒåŒ–çš„æ€æƒ³ï¼Œç‰ˆæœ¬æ˜¯å¦æ›´æ–°ä¹Ÿæ˜¯ç”±å¤§å®¶å†³å®šçš„</strong></p>
  </li>
</ul>

<p>è¿™é‡Œæœ‰ä¸€ä¸ª 95% åŸåˆ™ï¼Œå¦‚æœä¸€å®šæ—¶é—´å†…çš„æ‰€æœ‰åŒºå—çš„ 95% ä½¿ç”¨äº†è¿™ä¸ªè½¯åˆ†å‰çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±ä¸Šçº¿è¿™ä¸ªç‰ˆæœ¬ï¼ˆå˜ä¸º activeï¼‰ï¼Œä»è¿™æ—¶å€™å¼€å§‹ï¼Œæ‰€æœ‰ä¸éµå®ˆæ–°ç‰ˆæœ¬è§„åˆ™çš„åŒºå—ï¼Œå°†ä¸ä¼šè¢«çŸ¿å·¥ä»¬éªŒè¯é€šè¿‡ã€‚</p>

<h3 id="getblockhash">getblockhash</h3>

<p>è·å–æŸä¸ªåŒºå—çš„ hash</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td> --><td class="rouge-code"><pre>&gt;&gt; getblockhash 1000
00000000c937983704a73af28acdec37b049d214adbda81d7e2a3dd146f6ed09
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿™é‡Œè·å–çš„æ˜¯ç¬¬ 1000 ä¸ªåŒºå—çš„ hash</p>

<h3 id="getblock">getblock</h3>

<p>è·å–æŸä¸ªåŒºå—ä¿¡æ¯</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td> --><td class="rouge-code"><pre>&gt;&gt; getblock 00000000c937983704a73af28acdec37b049d214adbda81d7e2a3dd146f6ed09
ï¿¼{
  "hash": "00000000c937983704a73af28acdec37b049d214adbda81d7e2a3dd146f6ed09",
  "confirmations": 538753,
  "strippedsize": 216,
  "size": 216,
  "weight": 864,
  "height": 1000,
  "version": 1,
  "versionHex": "00000001",
  "merkleroot": "fe28050b93faea61fa88c4c630f0e1f0a1c24d0082dd0e10d369e13212128f33",
  "tx": [
    "fe28050b93faea61fa88c4c630f0e1f0a1c24d0082dd0e10d369e13212128f33"
  ],
  "time": 1232346882,
  "mediantime": 1232344831,
  "nonce": 2595206198,
  "bits": "1d00ffff",
  "difficulty": 1,
  "chainwork": "000000000000000000000000000000000000000000000000000003e903e903e9",
  "nTx": 1,
  "previousblockhash": "0000000008e647742775a230787d66fdf92c46a48c896bfbc85cdc8acc67e87d",
  "nextblockhash": "00000000a2887344f8db859e372e7e4bc26b23b9de340f725afbf2edb265b4c6"
}
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿™é‡Œçš„ä¿¡æ¯éƒ½å¾ˆç†Ÿæ‚‰ï¼Œåªè¯´ä¸‹é¢ä¸¤ä¸ªï¼š</p>

<ul>
  <li>weight: é‡é‡ï¼Œè¿™ä¸ªæ˜¯ segwit å¼•å…¥çš„æ¦‚å¿µï¼Œç”¨æ¥è®¡ç®—æ‰‹ç»­è´¹</li>
  <li>tx: è¿™é‡Œé¢æ˜¯æ‰€æœ‰çš„ transaction çš„ hashï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªï¼Œæ˜¯æŒ–çŸ¿çš„</li>
</ul>

<h3 id="getrawtrasaction">getrawtrasaction</h3>

<p>æ ¹æ® transaticon çš„ hash æ¥è·å¾—åŸå§‹æ•°æ®</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td> --><td class="rouge-code"><pre>&gt;&gt; getrawtransaction fe28050b93faea61fa88c4c630f0e1f0a1c24d0082dd0e10d369e13212128f33
01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff0804ffff
001d02fd04ffffffff0100f2052a01000000434104f5eeb2b10c944c6b9fbcfff94c35bdeecd93df977882babc7f3a2cf7f5c81d3b09a68db7f0e04f21de5d4230e75e6dbe7ad16eefe0d4325a62067dc6f369446aac00000000
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ç®€å•è§£æä¸‹ï¼Œæ³¨æ„å•Šï¼Œéƒ½æ˜¯<strong>å°ç«¯</strong>çš„ï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td> --><td class="rouge-code"><pre>01000000, version
01, txin num
0000000000000000000000000000000000000000000000000000000000000000, é¢„è®¾å€¼
ffffffff, é¢„è®¾å€¼
08, coinbase len
04ffff001d02fd04, coinbase
ffffffff, sequence
01, txout num
00f2052a01000000, 50 btc
43, script len
4104f5eeb2b10c944c6b9fbcfff94c35bdeecd93df977882babc7f3a2cf7f5c81d3b09a68db7f0e04f21de5d4230e75e6dbe7ad16eefe0d4325a62067dc6f369446aac
00000000, locktime
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥è§£æ</p>

<h3 id="decoderawtransaction">decoderawtransaction</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td> --><td class="rouge-code"><pre>&gt;&gt; decoderawtransaction 01000000010000000000000000000000000000000000000000000000000000000000000000ffffffff0804ffff001d02fd04ffffffff0100f2052a01000000434104f5eeb2b10c944c6b9fbcfff94c35bdeecd93df977882babc7f3a2cf7f5c81d3b09a68db7f0e04f21de5d4230e75e6dbe7ad16eefe0d4325a62067dc6f369446aac00000000

{
  "txid": "fe28050b93faea61fa88c4c630f0e1f0a1c24d0082dd0e10d369e13212128f33",
  "hash": "fe28050b93faea61fa88c4c630f0e1f0a1c24d0082dd0e10d369e13212128f33",
  "version": 1,
  "size": 135,
  "vsize": 135,
  "locktime": 0,
  "vin": [
    {
      "coinbase": "04ffff001d02fd04",
      "sequence": 4294967295
    }
  ],
  "vout": [
    {
      "value": 50.00000000,
      "n": 0,
      "scriptPubKey": {
        "asm": "04f5eeb2b10c944c6b9fbcfff94c35bdeecd93df977882babc7f3a2cf7f5c81d3b09a68db7f0e04f21de5d4230e75e6dbe7ad16eefe0d4325a62067dc6f369446a OP_CHECKSIG",
        "hex": "4104f5eeb2b10c944c6b9fbcfff94c35bdeecd93df977882babc7f3a2cf7f5c81d3b09a68db7f0e04f21de5d4230e75e6dbe7ad16eefe0d4325a62067dc6f369446aac",
        "reqSigs": 1,
        "type": "pubkey",
        "addresses": [
          "1BW18n7MfpU35q4MTBSk8pse3XzQF8XvzT"
        ]
      }
    }
  ]
}
</pre></td></tr></tbody></table></code></pre></div></div>

<p>è¿˜æ˜¯ä¸Šé¢é‚£äº›å†…å®¹ï¼Œè¿™æ ·çœ‹èµ·æ¥æˆ–è®¸ç›´è§‚ç‚¹ã€‚</p>

<h3 id="dumprivkey--importprivkey">dumprivkey &amp; importprivkey</h3>

<p>è¿™ä¸¤ä¸ªå¯ä»¥å¯¼å‡ºæŸä¸ªåœ°å€çš„ç§é’¥ï¼Œæˆ–è€…å°†æŸä¸ªç§é’¥å¯¼å…¥é’±åŒ…</p>

<h3 id="dumpwallet">dumpwallet</h3>

<p>å°†é’±åŒ…çš„æ‰€æœ‰ç§é’¥å’Œåœ°å€å¯¼å‡ºï¼Œå¼€å¯äº† HD çš„è¯ï¼Œä¼šå¯¼å‡ºå¾ˆå¤š</p>

<p>å…¶ä»–çš„å‘½ä»¤å°±ä¸ä¸€ä¸€ä»‹ç»äº†ï¼Œå¦‚æœä»¥åå‘ç°äº†æœ‰è¶£çš„å‘½ä»¤ï¼Œå†å¢åŠ è¿›æ¥ã€‚<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script></p>
:ET